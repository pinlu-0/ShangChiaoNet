<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">

<!-- 引入公共的header -->
<head th:replace="common/js_file :: head(~{::title})"></head>
<title>确认信息</title>


<!-- 引入公共的样式 -->
<style th:replace="common/css_file :: cssstyle"></style>

<body>

<!-- 引入公共的header -->
<div th:replace="common/header :: header"></div>

<div class="container theme-showcase" role="main">

    <div class="container">
        <div class="row clearfix">
            <div class="col-md-12 column">
                <!-- 引入项目模块的连接跳转导航栏 -->
                <nav th:replace="common/header :: goto"></nav>
            </div>
        </div>
    </div>


    <div class="container">
        <div class="row clearfix">
            <div class="col-md-12 column">
                <div class="panel panel-default">
                    <div class="panel-heading" style="text-align:center;">
                        <div class="container-fluid">
                            <div class="row clearfix">
                                <div class="col-md-3 column">
                                    <div class="progress"
                                         style="height:50px;border-radius:0;    position: absolute;width: 75%;right:49px;">
                                        <div class="progress-bar progress-bar-default" role="progressbar"
                                             aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"
                                             style="width: 100%;height:50px;">
                                            <div style="font-size:16px;margin-top:15px;">1. 项目及发起人信息</div>
                                        </div>
                                    </div>
                                    <div style="right: 0;border:10px solid #ddd;border-left-color: #88b7d5;border-width: 25px;position: absolute;
                                             border-left-color: rgba(221, 221, 221, 1);
                                             border-top-color: rgba(221, 221, 221, 0);
                                             border-bottom-color: rgba(221, 221, 221, 0);
                                             border-right-color: rgba(221, 221, 221, 0);
                                        ">
                                    </div>
                                </div>
                                <div class="col-md-3 column">
                                    <div class="progress"
                                         style="height:50px;border-radius:0;position: absolute;width: 75%;right:49px;">
                                        <div class="progress-bar progress-bar-default" role="progressbar"
                                             aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"
                                             style="width: 100%;height:50px;">
                                            <div style="font-size:16px;margin-top:15px;">2. 回报设置</div>
                                        </div>
                                    </div>
                                    <div style="right: 0;border:10px solid #ddd;border-left-color: #88b7d5;border-width: 25px;position: absolute;
                                             border-left-color: rgba(221, 221, 221, 1);
                                             border-top-color: rgba(221, 221, 221, 0);
                                             border-bottom-color: rgba(221, 221, 221, 0);
                                             border-right-color: rgba(221, 221, 221, 0);
                                        ">
                                    </div>
                                </div>
                                <div class="col-md-3 column">
                                    <div class="progress"
                                         style="height:50px;border-radius:0;position: absolute;width: 75%;right:49px;">
                                        <div class="progress-bar progress-bar-success" role="progressbar"
                                             aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"
                                             style="width: 100%;height:50px;">
                                            <div style="font-size:16px;margin-top:15px;">3. 确认信息</div>
                                        </div>
                                    </div>
                                    <div style="right: 0;border:10px solid #ddd;border-left-color: #88b7d5;border-width: 25px;position: absolute;
                                             border-left-color: rgba(92, 184, 92, 1);
                                             border-top-color: rgba(92, 184, 92, 0);
                                             border-bottom-color: rgba(92, 184, 92, 0);
                                             border-right-color: rgba(92, 184, 92, 0);
                                        ">
                                    </div>
                                </div>
                                <div class="col-md-3 column">
                                    <div class="progress" style="height:50px;border-radius:0;">
                                        <div class="progress-bar progress-bar-default" role="progressbar"
                                             aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"
                                             style="width: 100%;height:50px;">
                                            <div style="font-size:16px;margin-top:15px;">4. 完成</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="panel-body">

                        <div class="container-fluid">
                            <div class="row clearfix">
                                <div class="col-md-12 column">
                                    <blockquote style="border-left: 5px solid #f60;color:#f60;padding: 0 0 0 20px;">
                                        <b>
                                            确认信息（请填写易付宝企业账号用于收款及身份核实）
                                        </b>
                                    </blockquote>
                                </div>
                                <div class="col-md-12 column">


                                    <div class="row clearfix">
                                        <div class="col-md-6 column">
                                            <form role="form" id="confirmInfoForm">
                                                <div class="form-group">
                                                    <label>易付宝企业账号：</label>
                                                    <input type="text" name="paynum" class="form-control"/>
                                                </div>
                                                <div class="form-group">
                                                    <label>法人身份证号：</label>
                                                    <input type="text" name="cardnum" class="form-control"/>
                                                </div>
                                            </form>
                                        </div>
                                        <div class="col-md-6 column">
                                            <div class="panel panel-default">
                                                <div class="panel-body" style="padding:40px;">
                                                    <i class="glyphicon glyphicon-user"></i>
                                                    易购账户名：18801282948<br><br><span style="margin-left:60px;">您正在使用该账号发起众筹项目</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="panel-footer" style="text-align:center;">
                        <button type="button" class="btn  btn-default btn-lg">上一步</button>
                        <button type="button" id="submitBtn" class="btn  btn-warning btn-lg">提交</button>
                        <a class="btn"> 保存草稿 </a>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="container" style="margin-top:20px;">
        <div class="row clearfix">
            <div class="col-md-12 column">
                <div id="footer">
                    <div class="footerNav">
                        <a rel="nofollow" href="http://www.layoutit.cn">关于我们</a> | <a rel="nofollow"
                                                                                      href="http://www.layoutit.cn">服务条款</a>
                        | <a rel="nofollow" href="http://www.layoutit.cn">免责声明</a> | <a rel="nofollow"
                                                                                        href="http://www.layoutit.cn">网站地图</a>
                        | <a rel="nofollow" href="http://www.layoutit.cn">联系我们</a>
                    </div>
                    <div class="copyRight">
                        Copyright ?2017-2017layoutit.cn 版权所有
                    </div>
                </div>

            </div>
        </div>
    </div>

</div> <!-- /container -->
<script type="text/javascript">
    $('#myTab a').click(function (e) {
        e.preventDefault()
        $(this).tab('show')
    });

    $("#submitBtn").click(function () {
        //####################################获取表单数据
        // 易付宝账号
        var E_pay_account = $.trim($("input[name=paynum]").val());
        // 账号正则表达式
        //var E_pay_accountPattern = /^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/;
        var E_pay_accountPattern = /^[1][3,4,5,7,8][0-9]{9}$/;
        // 身份证
        var ID_number = $.trim($("input[name=cardnum]").val());
        // 身份证正则表达式
        var ID_number_Pattern = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
        if (E_pay_account.length == 0 || E_pay_account == "" || ID_number.length == 0 || ID_number == "") {
            layer.msg("账号或身份证号不能为空");
            return false;
        }
        if (!E_pay_accountPattern.test(E_pay_account)) {
            layer.msg("易付宝账号格式有误");
            return false;
        }
        if (!ID_number_Pattern.test(ID_number)) {
            layer.msg("请输入正确的18位有效证件号");
            return false;
        }
        var formData = $("#confirmInfoForm").serialize();
        console.log(formData);
        $.ajax({
            "url": "/project/create/confirm.json",
            "type": "post",
            "data": formData,
            "dataType": "json",
            "success": function (response) {
                // 成功要去的页面
                var result = response.result;
                if (result == "SUCCESS") {
                    layer.load;
                    location.href="http://localhost/project/create/finished/page.html"
                }

            },
            "error": function (response) {
                // 失败返回的页面
                if (response.result == "FAILED") {
                    layer.msg("发起失败");
                    return false;
                }
            }
        });

    });
</script>
</body>
</html>